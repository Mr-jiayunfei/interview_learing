# 个人介绍

您好，我叫贾云飞，目前就读于北京航空航天大学软件工程专业，22年1月份左右毕业。

我目前在滴滴的自动驾驶部门担任研发实习生，主要参与梳理各模块的数据处理流程，现阶段参与的主要是和prediction模块解决一些预测问题，

项目中用到的技术栈主要有C++、Python、ROS、Docker等，目前在学校参与的实验室项目为成功包络智能预判别项目，这项目也是我的毕业论文，

主要是使用LSTM神经网络预测试验环境下的航天器产品测试数据，之后使用异常检测、集成学习等方式进行包络识别。编程语言方面，我对C++比较熟悉，

Python、Java、C#、SQL等在项目开发中都使用过，以上就是我的个人介绍，谢谢！







# 滴滴实习项目介绍

分析自动驾驶数据和人工驾驶数据的模型特征分布：

针对模型的每一个特征，观察自动驾驶数据和人工驾驶数据的分布区别，主要是使用直方图的形式，在比较的过程中，

发现了什么？？？？



完善已有模型特征和开发新模型特征：

如之前的模型特征自车和agent到达冲突点的时间计算时间只有减速一种，实际可能有加速、减速、匀速三种可能

之前只有agent的加速度，没有自车的加速度

？？？需要完善



重新进行模型训练和测试：

完善特征后重新进行模型训练，测试主要i是使用将数据集拆分维训练集和测试集，有自动驾驶数据和人工驾驶数据，

相应的训练集有三个人工驾驶数据、自动驾驶数据、混合数据

测试集有人工驾驶数据、自动驾驶数据

哪个效果最好？

最终目标是使用人工驾驶数据训练出来的模型表现在自动驾驶的测试集上表现效果比较好，为什么要加另外几种？



分析比较LightGBM和NeuralNetwork在让行模型上的表现优：

主要是为了测试深度模型是否比树模型效果更好

模型分为onborad和offboard，其实也就是在线和离线（在车上运行和不在车上运行），离线的代码时python写的，需要使用python代码训练模型。

在线代码使用C++开发，C++速度更快，需要使用C++加载python训练好的模型，从github上找了一个MLP的开源代码，将其进行适配，主要内容就是python训练好模型后，将模型的参数保存成文本文件，神经网络本身是矩阵的乘法，C++加载解析这个文件，然后使用这个参数进行模型预测。网络比骄傲简单，使用的就是两个全连接层，文件保存的参数有每一层的结点个数，每个节点的输入数量，每个节点的输入权重，比如有50个特征，第一层就是有50个节点，第二次有256个节点，第三层有256个节点，第四层有一点节点，第二层的256个节点每个节点都会和前一层的50个节点相连，每个连线都会有一个权重，就是进行scenario_test,通过率有多少？



Onboard其实就是路测，还没有进行到这一步





调研airflow工具实现自动化的data pineline：

从采集数据到训练模型主要经过几个步骤：

1





voyager项目为自动驾驶项目，主要由4个模块组成，HDMAP，也就是高精地图，Percetion感知模块，Prediction预测模块，Planing and Control规划和控制模块，高精地图主要提供高精度的地图数据，人类开车需要普通的导航地图就可以，精度可能在2-3米，高精地图提供车道线级别的地图数据，精度在厘米级别，Perception模块主要是感知周围的物体，如交通灯、行人、vehicle等，并对他们进行标注，Prediction主要是预测交通参与者的轨迹，如行人、自行车、三轮车、普通车辆等，预测交通参与者6到11秒的运动轨迹，Planning and  control主要是根据prediction模块的结果规划自车的运动轨迹











# 创奇视界项目介绍



工作描述：

1 负责基于DDS的分布式仿真平台项目的开发和测试，主要使用Qt完成用户层的界面开发，使用OpenSplice框架完成分布式系统的节点通信，使用C++完成引擎控制层及仿真引擎层的相关功能开发；

2 负责基于DDS的分布式仿真平台项目的Linux移植工作；

3 负责云仿真项目的引擎适配，使用docker进行容器化测试部署；

4 负责综合控制软件的架构设计、开发和测试‘’



工作描述：



1 负责基于DDS的分布式仿真平台项目的开发和测试，项目成功在XX院所完成部署。



2 负责基于DDS的分布式仿真平台项目的Linux移植打包工作，项目成功在中标麒麟系统上部署运行；



3 负责云仿真项目的引擎适配，使用docker进行容器化测试部署，项目成功在XX院所完成第一阶段验收；



4 负责综合控制软件的架构设计、开发和测试，项目成功在XX院所完成验收







我在职期间参与周期最常的项目是基于DDS的分布式仿真平台项目，我首先介绍一下项目背景，为什么要有这个软件，这个软件要完成什么功能？比如说红方和蓝方近期可能要作战，我们直接在现实世界中进行模拟作战场景，是非常消耗资源的，但是如果我们通过仿真软件，进行一系列的仿真试验，并对仿真结果加以分析，选取最好的作战方案，就能节约很多资源，并且提高作战胜率，基于此需求，我们就需要开发出一款仿真软件，对各种仿真场景加以模拟。接下来，我简单介绍一下一个完整的仿真试验的基本流程：

1 首先是模型管理，就是构建各种模型，如卫星、雷达、舰船，根据他们的真实特性编写完成相关代码和辅助文件

2 第二部分是想定编辑，它的主要目的是生成一个完整的想定文件，这个文件保存的实体的属性信息，比如实体的经纬度，同时也保存着模型之间数据收发关系。

3 第三部分是态势显示，主要用来显示仿真运行过程中的实体状态变化，包括用gis完成的二维态势页面和用unity完成的三维态势页面

4 第四部分是仿真运行模块，主要用来控制仿真推演的开始、暂停、继续、结束、仿真步长、仿真倍速等

5 第五部分是引擎管理模块，主要包络时间管理、结点管理、主题管理、实体管理、opensplice中间件封装等

6 第六部分是数据管理部分，主要用来管理仿真过程中产生的数据，主要包括使用mongdb存储仿真数据，使用spdlog管理仿真日志

7 第七部分是数据回放部分，主要是根据monggodb存储的数据进行仿真试验的回访

8 第八部分是分析评估，主要用来分析本次试验结果是否正常，有何改进的地方

这些就是一个完整的仿真试验流程，我主要完成想定编辑模块、仿真运行模块、引擎管理模块，其他模块完成一些小功能的开发





项目难点

1 为模型设计统一的输入输出计算接口

  模型是其他单位做，我们单位也在做，然后在我们的仿真平台上运行，如果接口不一致，那就跑不起来，所以接口必须通用

  其次是模型也有组合模型一说，比如轰炸机模型就有飞机、雷达、导弹这些模型组合起来成为一个大模型，组合模型下需要和其他模型进行数据交互，组成组合模型的小模型之间也需要进行数据交互

模型也可能动态创建，比如导弹发射车在规定的时间发射导弹，导弹是动态创建出来的，诸如此类，

如何为模型设计一套统一的接口前期也花了很多时间

Setvalue函数、Getvalue函数、Tick函数、Init函数、InitValue函数

发布订阅者模式，Setvalue即是订阅主题数据，比如A模型订阅了3个主题的数据，每个主题有5个参数，需要给模型传15个参数

Setvalue即是给模型赋值，Getvalue即是发布主题数据，有一些问题，是把他的参数全部抛出去呢，还是等待其他模块调用，需要那个主题的数据，传那个主题的数据等等这些问题。。。

设计了一个模型基类，实现了这些接口，开发新的模型只需要继承基类模型即可。



2 仿真任务之间如何切换？

比如一个仿真步长要执行完APhase,BPhase,CPhase三个仿真任务，每个仿真任务需要完成不同的事情。每个任务之间如何进行切换？执行完三个仿真任务后，需要执行下一个仿真步长，整个过程如何管理起来更方便？



引入了一个时间管理模块和线程池模块，时间管理会往外发送仿真步长帧和任务帧，如任务帧是1，将APhase仿真任务压进线程池的工作队列当中，执行APhase仿真任务，执行完仿真任务后，回到时间管理模块，任务帧+1，将BPhase仿真任务压进线程池的工作队列当中，执行BPhase仿真任务，执行完仿真任务后，回到时间管理模块，依次循环，进行任务切换与仿真推进。



在时间管理模块也完成实时模式与超实时模式设置，仿真倍速与仿真模式设置等功能



3 如何更高效的执行仿真任务？

比如有10个实体，都要执行APhase仿真任务，如果我们串行的对这个10个实体执行，一方面仿真速度比较慢，一方面不能充分利用计算机的资源，所以使用多线程技术，引入了taskflow开源库，当有10个实体都要执行APhase仿真任务，开启10个线程并行的执行仿真任务，提高效率，因为线程之间不进行同步，所以之前的单线程也可以完成任务，只是效率比较慢



3 数据显示模块的更新问题？

 绘图一般比较费时间，如果界面绘制一帧取一帧数据，会导致DDS中的数据比较进行紧张，影响数据收发效率，

加了一个缓冲队列，引入了开源库ConcurrentQueue，显示界面直接从队列中取数据，而模型发布的数据也都先存在缓冲队列中，

而且显示模块有二维的gis模块、云平台的浏览器页面，三维开发的unity界面，所以需要统一发送的数据格式，最终确定为按时间帧排列的json数据串



5 仿真平台界面和仿真运行管理模块的同步，分布式系统中，主控节点的界面点击开始后，其他节点的界面也要同步开始，同步显示仿真状态。

仿真平台界面客户要求扁平化，实现word的那种效果，查阅相关资料，完成该功能。

日志查看界面，客户嫌弃使用记事本打开日志文件比较慢，需要我们做一个，而且要有查找过滤功能，使用了mvc模式，完成了界面，核心思想就是边读文件边显示，而且用户向下拉滚动条的时候才会更新，查找过滤是使用的代理模式，如果符合要求，代理会帮视图自动处理。





想定编辑模块是使用QT完成的界面，主要包括模型部署、阵营管理、实体管理、主题创建与编辑、模型发布订阅管理、想定文件生成与加载管理

仿真运行模块主要主要用来控制仿真推演的开始、暂停、继续、结束，同时允许以实时模式和超实时模式进行仿真推演

引擎管理层主要包括时间管理模块、节点管理模块、主题管理模块、实体管理模块等，时间管理模块主要用来管理主控节点和受控节点的时间同步问题，节点管理模块主要用来控制想定分发问题，主题管理模块主要用来管理数据的发布订阅，实体管理模块主要用来管理实体的创建销毁等。



1 使用Qt完成想定编辑模块的开发，便于用户使用界面生成完整的想定文件



2 使用OpenSplice消息中间件完成分布式系统中主控节点和受控节点的时间同步功能



3 完成仿真运行过程中以实时模式和超实时模式进行仿真推演功能



4 完成分布式系统节点之间同步开始、暂停、继续、结束仿真试验等功能



4 封装spdlog开源库完成系统日志功能



5 完成想定实体之间的聚合解聚功能，完成编队模型相关功能



6 完成该项目Linux系统移植打包工作，成功在中标麒麟系统上部署运行



7 使用Docker对引擎管理模块进行容器化测试部署